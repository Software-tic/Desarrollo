<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<h:form id="inscriptionRegisterFamilyForm">
	<h:inputHidden id="deshabilityE">
			</h:inputHidden>
			<p:defaultCommand target="deshabilityE"></p:defaultCommand>
			
		<p:panel id="registerReportFamilyPanel"
			header="#{bundle['page.student.headerRegisterReport']}" >
			
			
			<table width="100%" border="0" cellpadding="5" cellspacing="5">
				<tr>
					<td style="width:5%" />
					<td style="width:5%" />
					<td style="width:12%" />
					<td style="width:26%" />
					<td style="width:3%" />
					<td style="width:26%" />
					<td style="width:26%" />
					<td style="width:3%" />
					<td style="width:1%" />
				</tr>
				
				
					<tr>
					<td></td>
 
					<td colspan="7" align="center" style="background-color: #F2ECEC;"  
						height="30"><b>#{bundle['page.insReportFamily.labelStudentData']}</b> 
					</td>
				</tr>
				<tr>
						
						<td />
						<td colspan="5">#{bundle['page.insReportFamily.textGuide']}:</td>

					</tr>
			
				<tr>
					<td></td>
				</tr>
				<tr>
					<td></td>

					<td colspan="2"><h:outputText value="Número documento:">
						</h:outputText>
					</td>

					<td colspan="5"><p:inputText id="documentNumber"
							value="#{familyStudentBean.student.documentNumber}" style="width: 93%"
							maxlength="60" /> <pe:keyFilter preventPaste="false"
							for="documentNumber" mask="pnum"  /></td>
				</tr>


				<tr>
						<td />
						
						<td colspan="2">Código estudiante:</td>
						<td><p:inputText id="codeStudent"
								value="#{familyStudentBean.student.code}" 
								style="width:95%;" maxlength="12" /><pe:keyFilter preventPaste="false"  mask="pnum"  for="codeStudent"  />
						</td>
							<td align="right" colspan="1" width="15%">Correo Institucional:</td>
						<td width="19% " ><p:inputText id="emailStudent"
							value="#{familyStudentBean.student.email}" style="width: 98%"
							maxlength="100" /> <pe:keyFilter preventPaste="false"
							for="emailStudent" />	 		
							
						</td>
						<td colspan="2"><p:commandButton id="btnSearchUser"
								onstart="statusDialog.show();"
								styleClass="ui-priority-primary"  oncomplete="statusDialog.hide();"
								value="#{bundle['page.core.labelSearch']}"
								action="#{familyStudentBean.searchUser}"
								/></td>
								<td></td>
					</tr>
					</table>
					
					
					<p:outputPanel rendered="#{familyStudentBean.showReportData}"> 			
							<table width="100%" border="0" cellpadding="5" cellspacing="5">
							<tr>
					<td style="width:5%" />
					<td style="width:5%" />
					<td style="width:12%" />
					<td style="width:26%" />
					<td style="width:3%" />
					<td style="width:26%" />
					<td style="width:26%" />
					<td style="width:3%" />
					<td style="width:1%" />
				</tr>
					<tr><td></td></tr>
					<tr>
						<td />
						<td colspan="7" align="center" style="background-color: #F2ECEC;"
							height="30"><b>#{bundle['page.student.labelStudentData']}</b>
						</td>
						<td />
					</tr>
					<tr>
						<td  />
						<td colspan="2" >#{bundle['page.user.label_userName']}:</td>
						<td colspan="5"><p:inputText id="txtNameStudent"
								value="#{familyStudentBean.validateStudent.name} #{familyStudentBean.validateStudent.lastName}"
								style="width:99%;" maxlength="100" disabled="true" />
						</td>
						<td />
					</tr>
					<tr>
						<td />
						<td colspan="2" >#{bundle['page.insReportFamily.labelDocument']}:</td>
						<td><p:inputText id="txtDocumentStudent"
								value="#{familyStudentBean.validateStudent.documentNumber}"
								style="width:95%;" maxlength="12" disabled="true">								
							</p:inputText>  <pe:keyFilter for="txtDocumentStudent" mask="num" />
						</td>
						
						<td  align="right">Correo:</td>
						<td colspan="3"><p:inputText id="txtEmailStudent"
								value="#{familyStudentBean.validateStudent.email}"
								style="width:98%;" maxlength="100" disabled="true" />
						</td>
						<td />
						<td />
					</tr>
					
					<tr>
						<td><p:spacer height="15" /></td>
					</tr>
								

				<tr>
					<td></td>
					<td colspan="7" align="center" style="background-color: #F2ECEC;"
						height="30"><b>#{bundle['page.insReportFamily.labelRisk']}</b> 
					</td>


				</tr>
				<tr>
							<td />
							<td colspan="6">
								#{bundle['page.registerStudent.labelCategoryText']}</td>


						</tr>
				
				</table>
				
				
				<table width="100%" border="0" cellpadding="5" cellspacing="5">		
				<tr>
					<td style="width:5%" />
					<td style="width:5%" />
					<td style="width:12%" />
					<td style="width:26%" />
					<td style="width:3%" />
					<td style="width:26%" />
					<td style="width:26%" />
					<td style="width:3%" />
					<td style="width:1%" />
				</tr>		
				<tr>
							<td />


							<td>#{bundle['page.registerStudent.labelCategory']}</td>
							<td><p:selectOneMenu id="category"
									value="#{familyStudentBean.idCategory}">
									<f:selectItem itemLabel="#{bundle['page.core.selectOne']}"
										itemValue="0" />
									<f:selectItems
										value="#{familyStudentBean.riskFactorCategoryList}"
										var="r" itemLabel="#{r.name}" itemValue="#{r.id}" />
									<p:ajax global="false"
										listener="#{familyStudentBean.loadRiskFactorListByCategory()}"
										update="grid" />
								</p:selectOneMenu></td>

						</tr>
						<tr>
							<td colspan="7" align="center">
								<p:selectOneRadio id="grid" value="#{familyStudentBean.reportStudent.idRiskFactor}" layout="grid" columns="2">
									<f:selectItems value="#{familyStudentBean.riskFactorListByCategory}" var="risk" itemLabel="#{risk.name}" itemValue="#{risk.idRiskFactor}" />
									<p:ajax global="false" listener="#{familyStudentBean.showObservation}" update="inscriptionRegisterFamilyForm" />
								</p:selectOneRadio></td>
						</tr>
						<tr>
							<td><p:spacer height="15" /></td>
						</tr>

					</table>
	
				</p:outputPanel>
				<p:outputPanel id="showObservation"
						rendered="#{familyStudentBean.showObservation }">
						<table width="100%" border="0" cellpadding="5" cellspacing="5">	

					<tr>
					<td></td>
					<td colspan="7" align="center" style="background-color: #F2ECEC;"
						height="30"><b>#{bundle['page.insReportFamily.solicitorData']}</b> 
					</td>
				</tr>
					<tr>
				<td></td>	 <td colspan="7" align="left">  #{bundle['page.ins.reportFamily.guideText']}.</td>
				</tr>
		
				<tr>
					<td></td>
				</tr>
				<tr>
					<td> </td>

					<td colspan="2"><h:outputText value="* #{bundle['page.en.labelCompleteName']}:">
						</h:outputText>
					</td>

					<td colspan="5"><p:inputText id="nameFamily"
							value="#{familyStudentBean.familyStudent.name}"
							style="width: 99%" maxlength="60" /> <pe:keyFilter
							preventPaste="true" for="nameFamily" regEx="/[a-z ]/i" /></td>
				</tr>

				<tr>
					<td></td>
					<td colspan="2"><h:outputText value="* #{bundle['page.insReportFamily.labelRelationship']}:"> 
						</h:outputText>
					</td>

					<td><p:selectOneMenu style="width: 98%"
							id="relationshipTypeSelect"
							value="#{familyStudentBean.familyStudent.idRelationship}">
							<f:selectItem itemLabel="Seleccione Uno" itemValue="" />
							<f:selectItems value="#{familyStudentBean.relationshipList}"
								var="r" itemLabel="#{r.name}" itemValue="#{r.id}" />


						</p:selectOneMenu>
						<div id="Div1" class="LV_invalid" />
					</td>

				</tr>
				<tr>
					<td></td>

					<td colspan="2"><h:outputText value="* #{bundle['page.insReportFamily.labelDocument']}:"> 
						</h:outputText></td>
					<td><p:inputText id="documentFamily"
							value="#{familyStudentBean.familyStudent.document}"
							style="width: 98%" maxlength="11" /> <pe:keyFilter for="documentFamily" mask="pnum" /> </td>
					<td></td>

					<td colspan="3" ><h:outputText value="* #{bundle['page.insReportFamily.labelEmail']}:"> 
						</h:outputText> <p:spacer width="5"> </p:spacer> <p:inputText id="emailFamily"
							value="#{familyStudentBean.familyStudent.email}"
							style="width: 60%" maxlength="100" /> <pe:keyFilter
							preventPaste="false" for="emailFamily" /> </td>
					<td ></td>
				</tr>

				<tr>
					<td></td>
					<td colspan="2"><h:outputText value="#{bundle['page.insReportFamily.labelPhone']}:"> 
						</h:outputText></td>
					<td><p:inputText id="TelephoneFamily"
							value="#{familyStudentBean.familyStudent.phone}"
							style="width: 98%" maxlength="7" /> <pe:keyFilter
							preventPaste="true" for="TelephoneFamily" mask="pnum" /> </td>


					<td></td>

					<td colspan="3" ><h:outputText value="*#{bundle['page.insReportFamily.labelmobilePhone']}:">  
						</h:outputText> <p:spacer width="71" height="10"> </p:spacer> <p:inputText id="mobilePhone"
							value="#{familyStudentBean.familyStudent.mobilePhone}"
							style="width: 60%" maxlength="10" /> <pe:keyFilter for="mobilePhone" mask="pnum" /> </td>
					<td ></td>
				</tr>


				<tr>
					<td></td>
					<td colspan="2"><h:outputText value="* #{bundle['page.insReportFamily.labelAddress']}:">  
						</h:outputText></td>
					<td colspan="5"><p:inputText id="address"
							value="#{familyStudentBean.familyStudent.address}"
							style="width: 99%" maxlength="110" /> <pe:keyFilter
							preventPaste="true" for="address" />
					</td>
				</tr>

				<tr>
					<td></td>
				</tr>
				<tr>
					<td><p:spacer height="15" /></td>
				</tr>
				<tr>
					<td />
					<td colspan="7" align="center" style="background-color: #F2ECEC;"
						height="30"><b>*#{bundle['page.ins.labelObservation']}</b></td>
					<td />
				</tr>
				<tr> <td> </td> <td colspan="5"> <h:outputText value="#{bundle['page.insReportFamily.textGuideObservation']}">  </h:outputText></td> </tr> 
				
				<tr>
					<td>  </td>
					
					<td colspan="8"><p:inputTextarea autoResize="false"
							id="txtObservationStudent"
							value="#{familyStudentBean.reportStudent.detailReport}"
							style="width:98%;" cols="20" rows="5" maxlength="500" /></td>
					<td />
				</tr>

			</table>

			<p:spacer height="20" />
			<div align="center">
				<p:commandButton id="btnFamilyStudentReport"
					value="#{bundle['page.insReportFamily.reportStudentButton']}" type="button"   
					action="#{familyStudentBean.saveFamilyStudentReport}" 
					onclick="validateCreateReportFamily()"
					styleClass="ui-priority-primary" />
				<p:spacer width="10" />
				<p:commandButton value="#{bundle['page.core.labelCleanForm']}"  action="#{familyStudentBean.clearDataForm}"/> 
			</div>
			<p:spacer height="20" />
		</p:outputPanel>	
			
		</p:panel>
	</h:form>
	<script type="text/javascript">
		function addFamilyToolTip(list) {
			titleList = list.replace("[", "").replace("]", "").split("¥");
			var i;
			if (titleList.length > 0) {
				for (i = 0; titleList.length > i; i++) {
					var element = $("[for*='inscriptionRegisterFamilyForm\\:grid\\:"+i+"']")[0];
					if(element!=undefined){
						var title ="";
						title = titleList[i].trim();
						
						if(i>0)
							title = title.substring(title.indexOf(",") + 1, title.length).trim();
													
						element.title = title;	
					}				
				}
			}

		}
	</script>

</f:view>
