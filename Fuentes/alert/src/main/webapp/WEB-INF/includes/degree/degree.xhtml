<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	<h:form id="degreeForm">
		<p:outputPanel rendered="#{!riskFactorBean.getValidateUserRole(1,5)}">
			<p:spacer height="30"></p:spacer>
			<p:panel header="#{bundle['page.degree.labelDegree']}">
				<table width="100%" border="0" cellpadding="5" cellspacing="2">
					<tr>
						<td colspan="4" align="center"  style="background-color: #F2ECEC;" height="30"><b>Adición de Carreras</b></td>
					</tr>			
					<tr>
						<td colspan="3">
							<p />#{bundle['page.sp.fieldObligatory']}<p />
						</td>
					</tr>
					<tr>
						<td>*Nombre<p:spacer width="20" />
						<td>
							<p:selectOneMenu style="width: 98%" id="riskFactorCategorySelect" value="#{riskFactorBean.riskFactor.idRiskFactorCategory}">
								<f:selectItem itemLabel="Seleccione Uno" itemValue="" />
								<f:selectItems value="#{riskFactorBean.getRiskFactorListCategory()}" var="r" itemLabel="#{r.name}" itemValue="#{r.id}" />
							</p:selectOneMenu>
							<div id="selectCategory" class="LV_invalid" />
						</td>
					</tr>
					<tr>
						<td>
							*#{bundle['page.riskFactor.riskFactor']}:
							<p:spacer width="20" />
						</td>
						<td>
							<p:inputText value="#{riskFactorBean.riskFactor.name}" id="nameRiskFactor" style="width:98%" maxlength="120" />
						</td>
					</tr>
					<tr>
						<td />
					<td>*#{bundle['page.riskFactor.labelDescription']}:</td>
					<td><p:inputTextarea id="descriptionRiskFactor" style="width:98%" rows="2" value="#{riskFactorBean.riskFactor.description}" maxlength="256"
							autoResize="false" /></td>
					<td />
				</tr>
				
				
								
				<tr>
					<td/>
				 	<td colspan="3" align="left">
						<p:remoteCommand name="loadDefaultParameter" update="@form" action="#{aParameterBean.handleSelectParameter}">
							<f:setPropertyActionListener value="#{2}" target="#{aParameterBean.idZyosParameter}" />  
						</p:remoteCommand>  
					</td>
					<td/>
				</tr>
				<tr>
					<td width="5%"/>
					<td width="50%" align="left">
						<p:spacer width="20"/>
							<!--  <p:inputText  value="#{aParameterBean.name}" id="nameParameter" style="width:65%" />  -->
					</td>
					<td width="40%" align="left">
						<p:commandButton id="buttonAddParamete" rendered="false" value="#{bundle['page.riskFactor.labelButtonAdd']}"
								action="#{aParameterBean.goAddParameter}"
								partialSubmit="true" global="false" update=":degreeForm" 								
								styleClass="ui-priority-primary"/>
					</td>
					<td width="15%" align="center">
							
					</td>
					<td width="5%" />
				</tr>
				<tr>
					<td/>
					<td colspan="3" align="center">
						<p:dataTable id="tableDegree"
							value="#{aParameterBean.aparameterModel}" 
							editable="false"
							resizableColumns="false"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="20,40,60" paginator="true" rows="20"
							filterDelay="600"
							selection="#{aParameterBean.selectedParameterList}"
							emptyMessage="#{bundle['page.core.tableNoFoundRecord']}"
							var="parameter" style="width:100%;" widgetVar="parameterTable">
		
							<!--<p:ajax event="rowEdit" partialSubmit="true" global="false" listener="#{aParameterBean.handleEditParameter}" />
								<p:ajax event="rowEditCancel" partialSubmit="true" listener="#{aParameterBean.handleCancelParameter}" />  -->

							<f:facet name="header"> 
								#{bundle['page.degree.labelDegreeList']}		
								<div align="right">
									<h:outputText value="Buscar:" />
									<p:inputText id="globalFilter" onkeyup="parameterTable.filter()" style="width:150px" />
								</div>						
							</f:facet>
		
							<p:column selectionMode="multiple" width="20" />
		
							<p:column width="740" headerText="#{bundle['page.riskFactor.labelName']}"  filterMatchMode="contains" filterStyle="display:none"
								sortBy="#{parameter.name}" filterBy="#{parameter.name}" style="text-align:left">
								<div align="center">
									#{parameter.name}
								</div>
							</p:column>

							<p:column width="20">
								<div align="center">
									<p:commandLink title="Detallar" immediate="true" disabled="#{userBean.getValidateUserRole(4,6)}" partialSubmit="true" 
										action="#{userBean.goDetailUser}">
										<p:graphicImage value="../css/images/detail.gif" height="20" width="20" />
										<f:setPropertyActionListener target="#{userBean.selectedZyosUser}" value="#{zyosUser}" />
									</p:commandLink>
								</div>
							</p:column>
								
							<p:column style="width:20">
								<f:facet name="header">
									<div align="center">
										<p:commandLink title="Eliminar Carrera" action="#{aParameterBean.goDeleteParameter}" disabled="#{userBean.getValidateUserRole(5,6)}"
											 partialSubmit="true" update=":degreeForm:delParameterPopup">
											<p:graphicImage value="../css/images/delete.gif" style="width:20px;height:20px;" />
										</p:commandLink>
									</div>
								</f:facet>
												
								<div align="center">
									<p:commandLink title="Editar Carrera" action="#{aParameterBean.goEditPArameter}" disabled="#{userBean.getValidateUserRole(3,6)}"
										partialSubmit="true">
										<p:graphicImage value="../css/images/edit.gif" height="20" width="20" />
										<f:setPropertyActionListener target="#{userBean.selectedZyosUser}" value="#{zyosUser}" />
									</p:commandLink>
								</div>		
							</p:column>			 
					
							<f:facet name="footer">
								<p:outputPanel>#{fn:length(aParameterBean.parameterList)} Carrera(s) habilitada(s)</p:outputPanel>
							</f:facet>
						</p:dataTable>
						<br/>
					</td>
					<td/>
				</tr>
					
				<tr>
					<td/>
					<td align="center" colspan="3">
						<p:commandButton value="#{bundle['page.core.labelGoBack']}" onclick="history.back()" />
					</td>
					<td/>					
				</tr>
					
			</table>
				
			</p:panel>
			
			<p:dialog id="delParameterPopup"
				header="#{bundle['page.degree.deleteDegree']}" modal="true"
				resizable="false" draggable="true" showEffect="drop"
				hideEffect="fade" widgetVar="delParameterPopupWV" width="350">
				<p:outputPanel style="text-align:center;" layout="block">
					
					<table style="width: 100%" border="0" cellspacing="5" cellpading="5" >
						<tr>
							<td align="left">
								<h:outputText value="#{bundle['page.degree.textDelete']}: #{aParameterBean.parameterSelectedNameList}" /> 
								<br/><br/>
								<h:outputText value="¿#{bundle['page.degree.areSure']}?" />
							</td>
						</tr>
						<tr>
							<td align="center">
								<p/>
								<p:commandButton value="#{bundle['page.core.labelAcept']}"
									actionListener="#{aParameterBean.delParameter}"
									oncomplete="delParameterPopupWV.hide();"
									update=":degreeForm:tableDegree"
									styleClass="ui-priority-primary" />
								
								<p:spacer width="10"/>
								
								<p:commandButton value="#{bundle['page.login.labelButtonCancel']}" oncomplete="delParameterPopupWV.hide();"/>
								
							</td>
						</tr>
					</table>
				</p:outputPanel>
			</p:dialog>
			
			
			<p:dialog id="delParameterPopup3"
				header="#{bundle['page.degree.deleteDegree']}" modal="true"
				resizable="false" draggable="true" showEffect="drop"
				hideEffect="fade" widgetVar="delParameterPopupWV3" width="350">
				<p:outputPanel style="text-align:center;" layout="block">
					
					<table style="width: 100%" border="0" cellspacing="5" cellpading="5" >
						<tr>
							<td align="left">
								<h:outputText value="#{bundle['page.degree.textCantDelete']}" />
								<br/><br/>
								<h:outputText value=" #{aParameterBean.parameterDegreeNameList}" />
								<br/>
								
							</td>
						</tr>
						<tr>
							<td align="center">
								<p/>
								<p:commandButton value="#{bundle['page.core.labelAcept']}"									
									oncomplete="delParameterPopupWV3.hide();"
									update=":degreeForm:tableDegree"
									styleClass="ui-priority-primary" />
								
								<p:spacer width="10"/>								
								
							</td>
						</tr>
					</table>
				</p:outputPanel>
			</p:dialog>
		
		<script type="text/javascript">
			window.onload=function(){
				loadDefaultParameter();
			};
		</script>
		
		</p:outputPanel>
	
	</h:form>
</f:view>